<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../libs/CesiumUnminified/Cesium.js"></script>
    <link href="../libs/CesiumUnminified/Widgets/cesium_hex.css" rel="stylesheet">
    <link href="../libs/CesiumUnminified/Widgets/widgets.css" rel="stylesheet">
    <script src="../../cesium_pro/libs/CesiumUnminified/js/jQuery.js"></script>
</head>
<body>
    <div id="mapType" class="mycesiumlabalse">
        <div type="images" class="pic"
            style="background-image: url(../images/3dmaps.png);background-size:cover;right: 5px;">
            <span class="map_span">三维</span>
        </div>
        <div type="images" onclick="addtdtmaps()" class="pic"
            style="background-image: url(../images/2dmaps.png);background-size:cover;right: 105px;">
            <span class="map_span">地球</span>
        </div>
        <div type="images" onclick="arcgismaps()" class="pic"
            style="background-image: url(../images/nightpic.png);background-size:cover;right: 205px;">
            <span class="map_span">夜景</span>
        </div>
        <div type="images" onclick="addmaps()" class="pic"
            style="background-image: url(../images/streentpic.png);background-size:cover;right: 305px;">
            <span class="map_span">地图</span>
        </div>
    </div>
    <!-- 设置经纬度显示 -->
    <div id="cesium_positon">
        <div style="width: 165px;" class="labal_positon">
            <font size="2" color="white">点位经度：<span id="longitude_show"></span>°</font>
        </div>
        <div style="width: 180px;left: 160px;" class="labal_positon">
            <font size="2" color="white">点位纬度：<span id="latitude_show"></span>°</font>
        </div>
        <div style="width: 120px;left: 320px;" class="labal_positon">
            <font size="2" color="white">海拔高：<span id="height_show"></span>米</font>
        </div>
        <div style="width: 530px;left: 460px;" class="labal_positon">
            <font size="2" color="white">当前镜头信息：<span id="mess_carmer"></span></font>
        </div>
        <div style="width: 120px;left: 1000px;" class="labal_positon">
            <font size="2" color="white">镜头高度：<span id="height_carmer"></span></font>
        </div>
        <div style="width: 120px;left: 1150px;" class="labal_positon">
            <font size="2" color="white">旋转角：<span id="heading_carmer"></span></font>
        </div>
        <div style="width: 120px;left: 1250px;" class="labal_positon">
            <font size="2" color="white">俯仰角<span id="pitch_carmer"></span></font>
        </div>
    </div>
    <div id="toolsbtn">
        <button id="my_test11" class="btn" onclick="my_test3()">点我!</button>
        <button id="my_test22" class="btn" style="top: 50px;"onclick= "getheight()">关闭</button>
        <button id="my_test33" class="btn" style="top: 100px;" onclick="addmaps()">电子地图</button>
    </div>
    <div id="cesiumContainer1"></div>
    <div id="right-viewer" class="right-viewer"></div>
    <script>
        var viewer = new Cesium.Viewer('cesiumContainer1', {
            animation: false,//动画小部件
            baseLayerPicker: true,//地图图层组件
            fullscreenButton: false,//全屏组件
            geocoder: true,//地理编码搜索组件
            homeButton: false,//首页组件
            infoBox: false,//信息框
            sceneModePicker: false,//场景模式
            selectionIndicator: false,//选取指示器组件
            timeline: false,//时间轴
            navigationHelpButton: false,//帮助按钮
            navigationInstructionsInitiallyVisible: false,
            scene3DOnly: true,

        })
        viewer.imageryLayers.get(0).show = false;
        // 隐藏版权信息
        viewer._cesiumWidget._creditContainer.style.display = "none";

        // const esri = viewer.imageryLayers.addImageryProvider(new Cesium.ArcGisMapServerImageryProvider({
        //     url: 'https://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer'
        // })
        // )
        var tileset1 = viewer.scene.primitives.add(new Cesium.Cesium3DTileset({
            maximumScreenSpaceError: 64,// 数值加大，能让最终成像变模糊
            dynamicScreenSpaceError: true, // 根据测试，有了这个后，会在真正的全屏加载完之后才清晰化房屋
            maximumMemoryUsage: 512, // 内存分配变小有利于倾斜摄影数据回收，提升性能体验
            // url:'http://10.169.3.15:8088/gw/Production_2_osgb-3dtiles/tileset.json'
            url:'http://localhost:8005/Data/SG_3dtiles/tileset.json',
            // url: 'http://10.169.3.15:8088/gw/Production_2_osgb-3dtiles/tileset.json',
        }));
        viewer.scene.primitives.add(tileset1);
        // // 添加天地图地形数据
        // var tdtTerrainProvider = new Cesium.createWorldTerrain({
        //     url: 'http://t0.tianditu.gov.cn/terrain/ter_c',
        //     //    requestWaterMask : true, // 开启水面特效
        //     //    requestVertexNormals : true // 开启地形表面光照
        // });

        // // 将地形提供程序添加到viewer中
        // viewer.terrainProvider = tdtTerrainProvider;

        // // 设置相机初始位置
        // viewer.camera.setView({
        //     destination: Cesium.Cartesian3.fromDegrees(120.43511962890625, 36.16095445833333, 15000000.0)
        // });
        var j = 1;
        var button = document.getElementById("my_test33");
        button.addEventListener("click",
            function () {
                if (j == 1) {
                    addtdtmaps();
                }
                if (j == 2) {
                    addmaps();
                }
                if (j == 3) {
                    arcgismaps();
                    j = 0;
                }
                j++;
            })
    </script>
    <script>
        i = 2
        function my_test3() {
            var button = document.getElementById("my_test11");
            if (i % 2 == 0) {
                my_test()
            }
            else {
                my_test1()
            }
            i++;
        }
        function $(id) { return document.getElementById(id) }
        function my_test() {
            $("cesiumContainer1").style.width = "50%";
            $("right-viewer").style.display = "block";
            cesium_shuangpping();
        }
        function my_test1() {
            $("cesiumContainer1").style.width = "100%";
            $("right-viewer").style.display = "none";

        }
        viewer.camera.flyTo({
            destination: Cesium.Cartesian3.fromDegrees(114.1137459,22.548875,500), // 飞行目的地，视角高度
            duration: 2, // 飞行所用时间
            // 飞行完成后的事件
        });
    </script>
    <script>
        function test_a() {
            var handler = new Cesium.ScreenSpaceEventHandler(viewer.canvas);
            handler.setInputAction(function (movement) {
                var pick = viewer.scene.camera.pickEllipsoid(movement.endPosition);
                var x = Cesium.Cartographic.fromCartesian(pick);
                var lon = Cesium.Math.toDegrees(x.longitude)
                console.log(movement);
                console.log(pick);
                console.log(lon);
                console.log(x.longitude);
            }, Cesium.ScreenSpaceEventType.MOUSE_MOVE);
        }
    </script>
</body>
<script src="../../cesium_pro/libs/CesiumUnminified/js/addfeatures.js"></script>
<script src="../../cesium_pro/libs/CesiumUnminified/js/maps.js"></script>
<script src="../../cesium_pro/libs/CesiumUnminified/js/shuangping.js"></script>
</html>